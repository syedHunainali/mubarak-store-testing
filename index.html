<!DOCTYPE html>
<html lang="en">

<head>
    <!-- SEO META TAGS -->
    <meta
        content="Buy herbal products online from Mubarak Pansar - Karachi's trusted source for 100% natural remedies, dry fruits, honey, seeds, and supplements."
        name="description" />
    <meta
        content="pensar, pansar, mubarakpansar, mubarakpensar, herbal store karachi, herbs in karachi, natural remedies pakistan, herbal online store, cold pressed oils, herbal tea, seeds, supplements, dry fruits, essential oils, Karachi herbal store"
        name="keywords" />
    <meta content="Mubarak Pansar" name="author" />
    <!-- Open Graph / Facebook -->
    <meta content="Mubarak Pansar - Herbal Remedies &amp; Natural Products Online" property="og:title" />
    <meta
        content="Explore 100% natural herbal remedies, essential oils, and more at Karachi's best online herbal store."
        property="og:description" />
    <meta content="https://herbal-pansar.web.app/images/logo.png" property="og:image" />
    <meta content="https://herbal-pansar.web.app/" property="og:url" />
    <meta content="website" property="og:type" />
    <!-- Twitter -->
    <meta content="summary_large_image" name="twitter:card" />
    <meta content="Mubarak Pansar - Karachi's Herbal Experts" name="twitter:title" />
    <meta content="Buy herbal supplements, oils, and teas in Pakistan from a trusted Karachi pansar store."
        name="twitter:description" />
    <meta content="https://herbal-pansar.web.app/images/logo.png" name="twitter:image" />
    <!-- Schema Markup -->
    <script type="application/ld+json">
   {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "Mubarak Pansar",
      "image": "https://herbal-pansar.web.app/images/logo.png",
      "url": "https://herbal-pansar.web.app/",
      "description": "Pakistan's leading herbal store in Karachi. Natural herbal remedies, oils, supplements, and teas.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Karachi",
        "addressCountry": "PK"
      },
      "sameAs": [
        "https://facebook.com/mubarakpansar",
        "https://instagram.com/mubarakpansar"
      ]
    }
  </script>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>
        Mubarak-pansar - Pakistan Leading Herbal Online Store
    </title>
    <style>
        /* General Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hidden {
            display: none !important;
        }

        .btn {
            background: #000000;
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            display: inline-block;
            transition: all 0.3s;
            border: 2px solid #ffffff;
            cursor: pointer;
        }

        .btn:hover {
            background: #ffffff;
            color: #000000;
            transform: translateY(-2px);
        }

        .btn-primary {
            background: #7BC142;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
        }

        .btn-primary:hover {
            background: #6BA438;
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f39c12;
            color: white;
        }

        .btn-secondary:hover {
            background: #e67e22;
            color: white;
        }

        /* Delete Button */
        .btn-delete {
            background: #e74c3c;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            margin-left: 10px;
        }

        .btn-delete:hover {
            background: #c0392b;
        }

        /* Fulfillment Button Style */
        .btn-fulfillment {
            background: #3498db;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            margin-top: 10px;
        }

        .btn-fulfillment:hover {
            background: #2980b9;
        }

        .btn-fulfillment.fulfilled {
            background: #2ecc71;
            cursor: not-allowed;
        }

        /* Floating Appointment Button */
        .floating-appointment-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: #7BC142;
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(123, 193, 66, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-appointment-btn:hover {
            background: #6BA438;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(123, 193, 66, 0.6);
        }

        .floating-appointment-btn:active {
            transform: translateY(-1px);
        }

        /* Header & Navigation */
        .top-banner {
            background: #d4cdcd;
            color: rgb(19, 0, 0);
            text-align: center;
            padding: 8px;
            font-size: 14px;
            font-weight: bold;
        }

        .header {
            background: #ffffff;
            color: rgb(250, 250, 250);
            padding: 0px 0;
            position: sticky;
            top: 0;
            z-index: 1500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .header.hidden-mobile {
            transform: translateY(-100%);
        }

        .header-tools {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .logo img {
            height: 80px;
        }

        .search-wrapper {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .search-input {
            padding: 15px 20px;
            font-size: 14px;
            border-radius: 25px;
            border: 1px solid #ccc;
            outline: none;
            width: 500px;
        }

        /* Mobile Search */
        .mobile-search-btn {
            display: none;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
        }

        .mobile-search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }

        .mobile-search-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .mobile-search-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mobile-search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .mobile-search-close {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
        }

        .mobile-search-results {
            max-height: 60vh;
            overflow-y: auto;
        }

        .header-right-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-controls a {
            color: green;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
        }

        .cart-total-display {
            font-weight: bold;
            color: #000000;
        }

        .cart-button {
            font-size: 20px;
            color: #000;
            background: #fff;
            height: 50px;
            width: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #eee;
        }

        .cart-button:hover {
            background: #f0f0f0;
        }

        .cart-item-count-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f39c12;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .nav-container {
            max-width: 1500px;
            margin: 0px auto;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5px 0;
            text-align: center;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 25px;
            justify-content: center;
            flex: 1;
            flex-wrap: wrap;
        }

        .nav-link {
            color: rgb(255, 253, 253);
            text-decoration: none;
            padding: 10px 0;
            text-transform: uppercase;
            font-size: 14px;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: #f39c12;
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: #000;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }

        .mobile-menu-sidebar {
            position: absolute;
            top: 0;
            left: 0;
            width: 280px;
            height: 100%;
            background: white;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .mobile-menu-sidebar.open {
            transform: translateX(0);
        }

        .mobile-menu-header {
            background: #000;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-menu-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .mobile-menu-items {
            padding: 20px 0;
        }

        .mobile-menu-item {
            display: block;
            padding: 15px 20px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            text-transform: uppercase;
            font-weight: bold;
        }

        .mobile-menu-item:hover {
            background: #f0f0f0;
            color: #f39c12;
        }

        /* Image Slider Styles */
        .slider-container {
            max-width: 100%;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .slide {
            display: none;
            width: 100%;
            height: 500px;
            position: relative;
            background-size: cover;
            background-position: center;
        }

        .slide img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        .slide-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            /* Removed dark overlay */
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .slide-content h1 {
            font-size: 48px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .slide-content p {
            font-size: 20px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        .prev,
        .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 24px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 3;
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev:hover,
        .next:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .dots-container {
            text-align: center;
            padding: 10px;
            position: absolute;
            bottom: 10px;
            width: 100%;
            z-index: 3;
        }

        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active-dot,
        .dot:hover {
            background-color: #717171;
        }
        
        /* Hide mobile banner on desktop */
        .mobile-banner {
            display: none;
        }

        /* Collections Section */
        .collections-section {
            padding: 60px 0;
            text-align: center;
        }

        .collection-title {
            font-size: 28px;
            margin-bottom: 40px;
            color: #000000;
            position: relative;
            display: inline-block;
        }

        .collection-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background: #7BC142;
            margin: 8px auto 0;
        }

        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 30px;
        }

        .collection-item {
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .collection-item:hover {
            transform: translateY(-5px);
        }

        .collection-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 3px solid #f0f0f0;
        }

        .collection-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .collection-item h4 {
            font-size: 16px;
            color: #333;
        }

        /* Page & Section Styles */
        .page-header {
            background: #000000;
            color: white;
            padding: 40px 0;
            text-align: center;
        }

        .page-header h1 {
            font-size: 36px;
        }

        .page-content {
            padding: 60px 0;
            min-height: 60vh;
        }

        .section-title {
            text-align: center;
            font-size: 28px;
            margin-bottom: 30px;
            color: #000000;
        }

        /* Appointment Booking Styles */
        .appointment-page {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px 20px;
            min-height: 70vh;
        }

        .appointment-container {
            background: #fff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(38, 113, 3, 0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        .appointment-container h2 {
            margin-bottom: 30px;
            color: #7BC142;
            font-size: 28px;
        }

        .appointment-container .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .appointment-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .appointment-container input,
        .appointment-container textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .appointment-container input:focus,
        .appointment-container textarea:focus {
            outline: none;
            border-color: #7BC142;
            box-shadow: 0 0 0 2px rgba(123, 193, 66, 0.2);
        }

        .appointment-container .btn-primary {
            margin-top: 20px;
            padding: 15px;
            font-size: 18px;
        }

        .appointment-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: left;
        }

        .appointment-info h4 {
            color: #7BC142;
            margin-bottom: 10px;
        }

        .appointment-info p {
            margin-bottom: 8px;
            color: #666;
        }

        /* Admin Appointments */
        .appointment-record {
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .appointment-record h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .appointment-record p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }

        .appointment-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .appointment-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .appointment-status.confirmed {
            background: #d4edda;
            color: #155724;
        }

        .appointment-status.completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* Login/Auth Page */
        .auth-page {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px 20px;
        }

        .auth-container {
            background: #fff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(38, 113, 3, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .auth-container h2 {
            margin-bottom: 20px;
        }

        .auth-container .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .auth-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .auth-container input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .auth-container .btn-primary {
            margin-top: 10px;
        }

        .auth-container .toggle-auth {
            margin-top: 20px;
            font-size: 14px;
        }

        .auth-container .toggle-auth a {
            color: #7BC142;
            cursor: pointer;
            text-decoration: underline;
        }

        /* Admin Panel */
        .admin-panel {
            padding: 40px 0;
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid #ccc;
            margin-bottom: 20px;
        }

        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f1f1f1;
        }

        .admin-tab.active {
            background: #fff;
            border: 1px solid #ccc;
            border-bottom: none;
            font-weight: bold;
        }

        .admin-content {
            background: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
        }

        .order-record,
        .admin-product-card {
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .order-record h4 {
            margin-bottom: 10px;
        }

        .order-record p {
            margin: 5px 0;
            font-size: 14px;
        }

        .order-details {
            white-space: pre-wrap;
            font-family: monospace;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
        }

        .admin-product-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .admin-product-form .form-group {
            margin-bottom: 0;
        }

        .admin-product-form #image-preview {
            max-width: 100px;
            max-height: 100px;
            margin-top: 10px;
            border: 1px solid #ccc;
            padding: 5px;
            border-radius: 5px;
        }

        /* Product Management in Admin */
        .admin-product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f9f9f9;
        }

        .admin-product-info {
            flex: 1;
        }

        .admin-product-info h4 {
            margin-bottom: 5px;
            color: #333;
        }

        .admin-product-info p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .admin-product-actions {
            display: flex;
            gap: 10px;
        }

        /* Custom Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 90%;
            width: 500px;
        }

        .modal-content p {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .modal-close-btn {
            background: #7BC142;
            color: white;
            padding: 10px 25px;
        }

        /* Product Grid & Cards */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            height: 180px;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-info h3 {
            font-size: 16px;
            margin-bottom: 8px;
            color: #000000;
            font-weight: 600;
            line-height: 1.3;
            flex-grow: 1;
            cursor: pointer;
        }

        .product-price {
            font-size: 18px;
            font-weight: bold;
            color: #f39c12;
            margin-bottom: 12px;
        }

        .price-original {
            font-size: 14px;
            color: #999;
            text-decoration: line-through;
            margin-right: 8px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }

        .quantity-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            font-size: 18px;
            color: #666;
        }

        .quantity-input {
            width: 50px;
            height: 32px;
            border: 1px solid #ddd;
            border-left: none;
            border-right: none;
            text-align: center;
            font-size: 16px;
            outline: none;
            -moz-appearance: textfield;
        }

        .add-to-cart-btn {
            margin-top: auto;
        }

        /* Product Detail Page */
        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
            align-items: flex-start;
        }

        .product-detail-image {
            text-align: center;
            background: #f8f8f8;
            border-radius: 12px;
            padding: 40px;
        }

        .product-detail-image img {
            max-width: 100%;
            max-height: 300px;
            object-fit: contain;
        }

        .product-detail-info h1 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .product-detail-info .product-price {
            font-size: 24px;
        }

        .product-detail-info p {
            margin-bottom: 20px;
            color: #666;
        }

        .product-detail-info .quantity-controls {
            justify-content: flex-start;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #7BC142;
            text-decoration: none;
            font-weight: bold;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Cart Page */
        .cart-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            align-items: flex-start;
        }

        .cart-items {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
        }

        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
        }

        .cart-item-info h4 {
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: #888;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .remove-from-cart-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
        }

        .cart-summary {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            position: sticky;
            top: 150px;
        }

        .cart-summary h3 {
            margin-bottom: 20px;
        }

        .cart-summary p {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .cart-summary .total {
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 15px;
        }

        .cart-empty-message {
            text-align: center;
            font-size: 18px;
            color: #888;
            padding: 40px 0;
        }

        /* Checkout Page */
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: flex-start;
        }

        .checkout-form .form-group {
            margin-bottom: 20px;
        }

        .checkout-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .checkout-form input,
        .checkout-form textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .order-summary {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
        }

        .order-summary h3 {
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .summary-total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            font-weight: bold;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
        }

        .payment-methods {
            margin-top: 30px;
        }

        .payment-method-tabs {
            display: flex;
            border-bottom: 1px solid #ccc;
            margin-bottom: 20px;
        }

        .payment-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            background: #f1f1f1;
            color: #666;
            border-radius: 5px 5px 0 0;
        }

        .payment-tab.active {
            background: #fff;
            border-color: #ccc;
            border-bottom-color: #fff;
            position: relative;
            top: 1px;
            color: #000;
            font-weight: bold;
        }

        .payment-content {
            padding: 15px;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }

        .payment-warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 14px;
        }

        /* Footer */
        .footer {
            background: #000000;
            color: white;
            text-align: center;
            padding: 40px 0;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {

            /* Mobile Header */
            .header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
            }

            .header-tools {
                padding: 10px 15px;
                flex-wrap: nowrap;
                align-items: center;
            }

            .logo img {
                height: 65px;
            }

            .search-wrapper {
                display: none;
            }

            .mobile-search-btn {
                display: flex;
            }

            .cart-total-display {
                display: none;
            }

            .cart-button {
                width: 40px;
                height: 40px;
            }

            .auth-controls a {
                font-size: 12px;
            }

            /* Mobile Navigation */
            .nav-container {
                display: none;
            }

            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                background: #f0f0f0;
                border: 1px solid #ddd;
                color: #333;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                font-size: 20px;
                padding: 0;
                cursor: pointer;
            }

            .top-banner {
                margin-top: 0;
                font-size: 12px;
                padding: 8px 10px;
            }

            /* Mobile Content */
            body {
                padding-top: 115px;
            }

            .page-content {
                padding: 30px 0;
            }

            .collections-section {
                padding: 30px 0;
            }

            .collection-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 15px;
            }

            .collection-image {
                width: 110px;
                height: 110px;
            }

            /* Mobile Product Grid - 2 products per row */
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .product-card {
                font-size: 14px;
            }

            .product-image {
                height: 120px;
            }

            .product-info {
                padding: 10px;
            }

            .product-info h3 {
                font-size: 14px;
                margin-bottom: 5px;
            }

            .product-price {
                font-size: 16px;
                margin-bottom: 8px;
            }

            .quantity-controls {
                margin-bottom: 8px;
            }

            .quantity-btn {
                width: 28px;
                height: 28px;
                font-size: 16px;
            }

            .quantity-input {
                width: 40px;
                height: 28px;
                font-size: 14px;
            }

            .btn-primary {
                padding: 8px;
                font-size: 14px;
            }

            /* Mobile Slider */
            .desktop-banner {
                display: none;
            }

            .mobile-banner {
                display: block;
            }
            
            .slide {
                height: 250px;
            }

            .slide-content h1 {
                font-size: 24px;
            }

            .slide-content p {
                font-size: 14px;
            }

            .btn {
                padding: 8px 16px;
                font-size: 14px;
            }

            /* Mobile Product Detail */
            .product-detail-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .product-detail-image {
                padding: 20px;
            }

            .product-detail-info h1 {
                font-size: 24px;
            }

            .product-detail-info .product-price {
                font-size: 20px;
            }

            /* Mobile Cart */
            .cart-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .cart-item-details {
                width: 100%;
            }

            .cart-item-actions {
                width: 100%;
                justify-content: space-between;
            }

            .cart-summary {
                position: static;
            }

            /* Mobile Checkout */
            .checkout-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .payment-method-tabs {
                flex-wrap: wrap;
            }

            .payment-tab {
                flex: 1;
                min-width: 100px;
                font-size: 12px;
                padding: 8px 10px;
            }

            /* Mobile Admin */
            .admin-product-form {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .admin-tabs {
                flex-wrap: wrap;
            }

            .admin-tab {
                flex: 1;
                font-size: 14px;
                padding: 8px 15px;
            }

            .admin-product-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .admin-product-actions {
                width: 100%;
                justify-content: flex-end;
            }

            /* Mobile Auth */
            .auth-container {
                margin: 10px;
                padding: 20px;
            }

            /* Mobile Appointment */
            .appointment-container {
                margin: 10px;
                padding: 20px;
            }

            .appointment-container h2 {
                font-size: 24px;
            }

            .floating-appointment-btn {
                width: 60px;
                height: 60px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }

            /* Mobile Modal */
            .modal-content {
                margin: 20px;
                padding: 20px;
            }

            .section-title {
                font-size: 24px;
            }

            .page-header h1 {
                font-size: 28px;
            }

            .container {
                padding: 0 15px;
            }
        }

        @media (max-width: 480px) {
            .product-info h3 {
                font-size: 12px;
            }

            .product-price {
                font-size: 14px;
            }

            .slide-content h1 {
                font-size: 20px;
            }

            .collection-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 15px;
            }

            .collection-image {
                width: 100px;
                height: 100px;
            }

            .collection-item h4 {
                font-size: 14px;
            }
        }
    </style>
</head>

<body>
    <div class="modal-overlay hidden" id="custom-modal">
        <div class="modal-content">
            <p id="modal-message">
                This is a message.
            </p>
            <button class="btn btn-primary modal-close-btn" id="modal-close-btn">
                Close
            </button>
        </div>
    </div>
    
    <!-- Floating Appointment Button -->
    <button class="floating-appointment-btn" onclick="showPage('appointment')" title="Book Appointment with Herbal Specialist">
        📅
    </button>
    
    <!-- Mobile Search Overlay -->
    <div class="mobile-search-overlay" id="mobile-search-overlay">
        <div class="mobile-search-container">
            <div class="mobile-search-header">
                <input class="mobile-search-input" id="mobile-search-input" placeholder="Search products..."
                    type="search" />
                <button class="mobile-search-close" onclick="closeMobileSearch()">
                    ×
                </button>
            </div>
            <div class="mobile-search-results">
                <div class="product-grid" id="mobile-search-results-grid">
                </div>
            </div>
        </div>
    </div>
    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay">
        <div class="mobile-menu-sidebar" id="mobile-menu-sidebar">
            <div class="mobile-menu-header">
                <h3>
                    Menu
                </h3>
                <button class="mobile-menu-close" onclick="closeMobileMenu()">
                    ×
                </button>
            </div>
            <div class="mobile-menu-items">
                <a class="mobile-menu-item" href="#" onclick="showPage('home'); closeMobileMenu();">
                    HOME
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('dry-fruits'); closeMobileMenu();">
                    DRY FRUITS
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('herbal-tea'); closeMobileMenu();">
                    HERBAL TEA
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('honey'); closeMobileMenu();">
                    HONEY
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('seeds'); closeMobileMenu();">
                    SEEDS
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('supplements'); closeMobileMenu();">
                    SUPPLEMENTS
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('capsules'); closeMobileMenu();">
                    CAPSULES
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('cold-pressed-oil'); closeMobileMenu();">
                    COLD
                    PRESSED OIL
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('essential-oils'); closeMobileMenu();">
                    ESSENTIAL
                    OILS
                </a>
                <a class="mobile-menu-item" href="#" onclick="showPage('deals'); closeMobileMenu();">
                    DEALS
                </a>
            </div>
        </div>
    </div>
    <header class="header" id="main-header">
        <div class="header-tools">
            <button class="mobile-menu-btn" onclick="openMobileMenu()">
                ☰
            </button>
            <div class="logo">
                <a href="#" onclick="showPage('home')">
                    <img alt="Herbal Store Logo" src="images/logo.png" />
                </a>
            </div>
            <div class="search-wrapper">
                <input class="search-input" id="search-input" placeholder="Search products..." type="search" />
            </div>
            <div class="header-right-controls">
                <button class="mobile-search-btn" onclick="openMobileSearch()">
                    🔍
                </button>
                <div id="auth-controls">
                    <a href="#" onclick="showPage('login')">
                        Login
                    </a>
                </div>
                <div class="cart-total-display">
                    Total: PKR
                    <span id="cart-total-header">
                        0.00
                    </span>
                </div>
                <div class="cart-button" onclick="showPage('cart')">
                    <img alt="your cart" height="30" src="images/cart.png" width="30" />
                    <span class="cart-item-count-badge">
                        0
                    </span>
                </div>
            </div>
        </div>
        <div class="nav-container">
            <nav>
                <ul class="nav-menu">
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('home')">
                            HOME
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('dry-fruits')">
                            DRY FRUITS
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('herbal-tea')">
                            HERBAL TEA
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('honey')">
                            HONEY
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('seeds')">
                            SEEDS
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('supplements')">
                            SUPPLEMENTS
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('capsules')">
                            CAPSULES
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('cold-pressed-oil')">
                            COLD PRESSED OIL
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('essential-oils')">
                            ESSENTIAL OILS
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="#" onclick="showPage('deals')">
                            DEALS
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="top-banner">
            *Free Shipping For Order Above Rs.2000 **Pakistan's Best Herbal Online Store
        </div>
    </header>
    <main>
        <div class="page" id="home-page">
            <!-- Desktop Banner (Slider with 3 slides) -->
            <div id="desktop-slider" class="slider-container desktop-banner">
                <div class="slide">
                    <img alt="Herbal Remedies Banner" src="images/Banner1.png" />
                    <div class="slide-content">
                        <h1>
                            Discover Nature's Finest Remedies
                        </h1>
                        <p>
                            Your trusted source for natural health and wellness products.
                        </p>
                        <a class="btn" href="#" onclick="showPage('supplements')">
                            Shop Now
                        </a>
                    </div>
                </div>
                <div class="slide">
                    <img alt="Premium Honey Banner" src="images/Banner2.png" />
                    <div class="slide-content">
                        <h1>
                            Premium Quality Honey
                        </h1>
                        <p>
                            100% Pure and Organic Honey varieties.
                        </p>
                        <a class="btn btn-secondary" href="#" onclick="showPage('honey')">
                            Explore Honey
                        </a>
                    </div>
                </div>
                <div class="slide">
                    <img alt="Fresh Dry Fruits Banner" src="images/Banner1.png" />
                    <div class="slide-content">
                        <h1>
                            Fresh & Healthy Dry Fruits
                        </h1>
                        <p>
                            The perfect snack for a healthy lifestyle.
                        </p>
                        <a class="btn" href="#" onclick="showPage('dry-fruits')">
                            View Collection
                        </a>
                    </div>
                </div>
                <a class="prev" onclick="plusSlides(-1)">
                    ❮
                </a>
                <a class="next" onclick="plusSlides(1)">
                    ❯
                </a>
                <div class="dots-container">
                    <span class="dot" onclick="currentSlideDot(1)">
                    </span>
                    <span class="dot" onclick="currentSlideDot(2)">
                    </span>
                    <span class="dot" onclick="currentSlideDot(3)">
                    </span>
                </div>
            </div>

            <!-- Mobile Banner (3 slides, auto-rotating) -->
            <div id="mobile-slider" class="slider-container mobile-banner">
                <div class="slide" style="display: block;">
                    <img alt="Herbal Remedies Mobile Banner" src="images/MBanner1.png" />
                    <div class="slide-content">
                        <h1>
                            Nature's Finest Remedies
                        </h1>
                        <a class="btn" href="#" onclick="showPage('supplements')">
                            Shop Now
                        </a>
                    </div>
                </div>
                <div class="slide">
                    <img alt="Premium Honey Mobile Banner" src="images/MBanner2.png" />
                    <div class="slide-content">
                        <h1>
                            Premium Quality Honey
                        </h1>
                        <a class="btn" href="#" onclick="showPage('honey')">
                            Explore
                        </a>
                    </div>
                </div>
                <div class="slide">
                    <img alt="Dry Fruits Mobile Banner" src="images/MBanner3.png" />
                    <div class="slide-content">
                        <h1>
                            Healthy Dry Fruits
                        </h1>
                        <a class="btn" href="#" onclick="showPage('dry-fruits')">
                            View All
                        </a>
                    </div>
                </div>
            </div>

            <section class="collections-section">
                <div class="container">
                    <h2 class="collection-title">
                        Shop By Collection
                    </h2>
                    <div class="collection-grid">
                        <div class="collection-item" onclick="showPage('dry-fruits')">
                            <div class="collection-image">
                                <img alt="Dry Fruits"
                                    src="images/collection-1.png" />
                            </div>
                            <h4>
                                Dry Fruits
                            </h4>
                        </div>
                        <div class="collection-item" onclick="showPage('herbal-tea')">
                            <div class="collection-image">
                                <img alt="Herbal Tea"
                                    src="images/collection-2.png" />
                            </div>
                            <h4>
                                Herbal Tea
                            </h4>
                        </div>
                        <div class="collection-item" onclick="showPage('honey')">
                            <div class="collection-image">
                                <img alt="Honey" src="images/collection-3.png" />
                            </div>
                            <h4>
                                Honey
                            </h4>
                        </div>
                        <div class="collection-item" onclick="showPage('seeds')">
                            <div class="collection-image">
                                <img alt="Seeds" src="images/collection-4.png" />
                            </div>
                            <h4>
                                Seeds
                            </h4>
                        </div>
                        <div class="collection-item" onclick="showPage('supplements')">
                            <div class="collection-image">
                                <img alt="Supplements"
                                    src="images/collection-5.png" />
                            </div>
                            <h4>
                                Supplements
                            </h4>
                        </div>
                        <div class="collection-item" onclick="showPage('essential-oils')">
                            <div class="collection-image">
                                <img alt="Essential Oils" src="images/collection-6.png" />
                            </div>
                            <h4>
                                Essential Oils
                            </h4>
                        </div>
                    </div>
                </div>
            </section>
            <section class="products page-content">
                <div class="container">
                    <h2 class="section-title">
                        All Products
                    </h2>
                    <div class="product-grid" id="all-products-grid">
                    </div>
                </div>
            </section>
        </div>

        <!-- Appointment Booking Page -->
        <div class="page hidden" id="appointment-page">
            <div class="appointment-page">
                <div class="appointment-container">
                    <h2>Book Appointment with Herbal Specialist</h2>
                    
                    <div class="appointment-info">
                        <h4>Consultation Information</h4>
                        <p>• Free consultation with certified herbal specialist</p>
                        <p>• Personalized treatment recommendations</p>
                        <p>• Available Monday to Saturday: 9 AM - 6 PM</p>
                        <p>• Sunday appointments available on request</p>
                    </div>

                    <form id="appointment-form">
                        <div class="form-group">
                            <label for="appointment-name">Full Name *</label>
                            <input type="text" id="appointment-name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointment-phone">Phone Number *</label>
                            <input type="tel" id="appointment-phone" name="phone" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointment-email">Email Address</label>
                            <input type="email" id="appointment-email" name="email">
                        </div>
                        
                        <div class="form-group">
                            <label for="appointment-date">Preferred Date *</label>
                            <input type="date" id="appointment-date" name="date" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointment-time">Preferred Time *</label>
                            <select id="appointment-time" name="time" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;">
                                <option value="">Select Time</option>
                                <option value="09:00">9:00 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="17:00">5:00 PM</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointment-concern">Health Concern/Reason for Visit</label>
                            <textarea id="appointment-concern" name="concern" rows="4" placeholder="Please describe your health concerns or what you'd like to discuss..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn-primary">Book Appointment</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="page hidden" id="dry-fruits-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Dry Fruits
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="dry-fruits-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="herbal-tea-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Herbal Tea
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="herbal-tea-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="honey-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Honey
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="honey-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="seeds-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Seeds
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="seeds-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="supplements-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Supplements
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="supplements-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="capsules-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Capsules
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="capsules-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="cold-pressed-oil-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Cold Pressed Oil
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="cold-pressed-oil-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="essential-oils-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Essential Oils
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="essential-oils-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="deals-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Deals
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="deals-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="search-results-page">
            <div class="page-header">
                <div class="container">
                    <h1 id="search-results-title">
                        Search Results
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container">
                    <div class="product-grid" id="search-results-grid">
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="product-detail-page">
            <div class="page-content">
                <div class="container" id="product-detail-content">
                </div>
            </div>
        </div>
        <div class="page hidden" id="cart-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Shopping Cart
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container" id="cart-view-container">
                </div>
            </div>
        </div>
        <div class="page hidden" id="checkout-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Checkout
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container checkout-container">
                    <div class="checkout-form">
                        <h3>
                            Shipping Details
                        </h3>
                        <form id="checkout-form-element">
                            <div class="form-group">
                                <label for="fullName">
                                    Full Name
                                </label>
                                <input id="fullName" name="Full Name" required="" type="text" />
                            </div>
                            <div class="form-group hidden" id="guest-email-group">
                                <label for="email">
                                    Email
                                    Address
                                </label>
                                <input id="email" name="Email" required="" type="email" />
                            </div>
                            <div class="form-group">
                                <label for="phone">
                                    Phone Number
                                </label>
                                <input id="phone" name="Phone Number" required="" type="tel" />
                            </div>
                            <div class="form-group">
                                <label for="address">
                                    Full Address
                                </label>
                                <textarea id="address" name="Address" required="" rows="4"></textarea>
                            </div>
                            <div class="payment-methods">
                                <h3>
                                    Payment Method
                                </h3>
                                <div class="payment-method-tabs">
                                    <div class="payment-tab active" onclick="showPaymentContent('cod')">
                                        Cash on Delivery
                                    </div>
                                    <div class="payment-tab" onclick="showPaymentContent('easypaisa')">
                                        EasyPaisa
                                    </div>
                                    <div class="payment-tab" onclick="showPaymentContent('card')">
                                        Card Payment
                                    </div>
                                </div>
                                <div class="payment-content" id="cod-content">
                                    <p>
                                        You will pay when your order is delivered.
                                    </p>
                                </div>
                                <div class="payment-content hidden" id="easypaisa-content">
                                    <p>
                                        Please transfer the total amount to the following EasyPaisa account and enter
                                        the
                                        Transaction ID below:
                                    </p>
                                    <p>
                                        <b>
                                            Account Title:
                                        </b>
                                        Herbal Store PK
                                        <br />
                                        <b>
                                            Account Number:
                                        </b>
                                        0300-1234567
                                    </p>
                                    <div class="form-group" style="margin-top: 15px;">
                                        <label for="easypaisa-tid">
                                            Transaction ID (TID)
                                        </label>
                                        <input id="easypaisa-tid" name="EasyPaisa TID"
                                            placeholder="Enter your payment TID" type="text" />
                                    </div>
                                </div>
                                <div class="payment-content hidden" id="card-content">
                                    <div class="form-group">
                                        <label for="card-number">
                                            Card Number
                                        </label>
                                        <input id="card-number" name="Card Number" placeholder="XXXX XXXX XXXX XXXX"
                                            type="text" />
                                    </div>
                                    <div class="form-group" style="display: flex; gap: 10px;">
                                        <div style="flex: 1;">
                                            <label for="card-expiry">
                                                Expiry (MM/YY)
                                            </label>
                                            <input id="card-expiry" name="Card Expiry" placeholder="MM/YY"
                                                type="text" />
                                        </div>
                                        <div style="flex: 1;">
                                            <label for="card-cvc">
                                                CVC
                                            </label>
                                            <input id="card-cvc" name="Card CVC" placeholder="XXX" type="text" />
                                        </div>
                                    </div>
                                    <div class="payment-warning">
                                        <strong>
                                            For Demo Purposes Only.
                                        </strong>
                                        Do not enter
                                        real credit card information.
                                    </div>
                                </div>
                            </div>
                            <button class="btn-primary" style="margin-top: 20px;" type="submit">
                                Place Order
                            </button>
                        </form>
                    </div>
                    <div class="order-summary">
                        <h3>
                            Your Order
                        </h3>
                        <div id="checkout-summary-container">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page hidden" id="order-success-page">
            <div class="page-content" style="text-align: center;">
                <div class="container">
                    <h2>
                        ✅ Thank You!
                    </h2>
                    <p>
                        Your order has been placed successfully.
                    </p>
                    <p>
                        We will contact you shortly to confirm the details.
                    </p>
                    <button class="btn-primary" onclick="showPage('home'); cart = []; updateCartDisplay();"
                        style="margin-top: 20px; width: auto;">
                        Continue Shopping
                    </button>
                </div>
            </div>
        </div>
        <div class="page hidden" id="login-page">
            <div class="auth-page">
                <div class="auth-container">
                    <form id="login-form">
                        <h2>
                            Login
                        </h2>
                        <div class="form-group">
                            <label for="login-email">
                                Email
                            </label>
                            <input id="login-email" required="" type="email" />
                        </div>
                        <div class="form-group">
                            <label for="login-password">
                                Password
                            </label>
                            <input id="login-password" required="" type="password" />
                        </div>
                        <button class="btn btn-primary" type="submit">
                            Login
                        </button>
                        <p class="toggle-auth">
                            Don't have an account?
                            <a onclick="toggleAuthForms()">
                                Sign Up
                            </a>
                        </p>
                    </form>
                    <form class="hidden" id="signup-form">
                        <h2>
                            Sign Up
                        </h2>
                        <div class="form-group">
                            <label for="signup-name">
                                Name
                            </label>
                            <input id="signup-name" required="" type="text" />
                        </div>
                        <div class="form-group">
                            <label for="signup-email">
                                Email
                            </label>
                            <input id="signup-email" required="" type="email" />
                        </div>
                        <div class="form-group">
                            <label for="signup-password">
                                Password
                            </label>
                            <input id="signup-password" required="" type="password" />
                        </div>
                        <button class="btn btn-primary" type="submit">
                            Sign Up
                        </button>
                        <p class="toggle-auth">
                            Already have an account?
                            <a onclick="toggleAuthForms()">
                                Login
                            </a>
                        </p>
                    </form>
                </div>
            </div>
        </div>
        <div class="page hidden" id="admin-page">
            <div class="page-header">
                <div class="container">
                    <h1>
                        Admin Panel
                    </h1>
                </div>
            </div>
            <div class="page-content">
                <div class="container admin-panel">
                    <div class="admin-tabs">
                        <div class="admin-tab active" onclick="showAdminContent('orders')">
                            Orders
                        </div>
                        <div class="admin-tab" onclick="showAdminContent('appointments')">
                            Appointments
                        </div>
                        <div class="admin-tab" onclick="showAdminContent('products')">
                            Add Product
                        </div>
                        <div class="admin-tab" onclick="showAdminContent('manage')">
                            Manage Products
                        </div>
                    </div>
                    <div class="admin-content" id="admin-orders-content">
                        <h3 style="margin-bottom: 20px;">
                            Received Orders
                        </h3>
                        <div id="orders-list">
                        </div>
                    </div>
                    <div class="admin-content hidden" id="admin-appointments-content">
                        <h3 style="margin-bottom: 20px;">
                            Appointment Bookings
                        </h3>
                        <div id="appointments-list">
                        </div>
                    </div>
                    <div class="admin-content hidden" id="admin-products-content">
                        <h3 style="margin-bottom: 20px;">
                            Add a New Product
                        </h3>
                        <form id="add-product-form">
                            <div class="admin-product-form">
                                <div class="form-group">
                                    <label for="product-name">
                                        Product Name
                                    </label>
                                    <input id="product-name" required="" type="text" />
                                </div>
                                <div class="form-group">
                                    <label for="product-price">
                                        Price (PKR)
                                    </label>
                                    <input id="product-price" required="" type="number" />
                                </div>
                                <div class="form-group">
                                    <label for="product-category">
                                        Category
                                    </label>
                                    <select id="product-category" required=""
                                        style="width:100%; padding:12px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px;">
                                        <option value="dry-fruits">
                                            Dry Fruits
                                        </option>
                                        <option value="herbal-tea">
                                            Herbal Tea
                                        </option>
                                        <option value="honey">
                                            Honey
                                        </option>
                                        <option value="seeds">
                                            Seeds
                                        </option>
                                        <option value="supplements">
                                            Supplements
                                        </option>
                                        <option value="capsules">
                                            Capsules
                                        </option>
                                        <option value="cold-pressed-oil">
                                            Cold Pressed Oil
                                        </option>
                                        <option value="essential-oils">
                                            Essential Oils
                                        </option>
                                        <option value="deals">
                                            Deals
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="product-image-filename">
                                        Product Image Filename
                                    </label>
                                    <input id="product-image-filename" placeholder="e.g., my-image.jpg" required=""
                                        type="text" />
                                </div>
                                <div class="form-group" style="grid-column: 1 / -1;">
                                    <label for="product-description">
                                        Description
                                    </label>
                                    <textarea id="product-description" required="" rows="4"></textarea>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="margin-top: 20px; width: auto;" type="submit">
                                Add
                                Product
                            </button>
                        </form>
                    </div>
                    <div class="admin-content hidden" id="admin-manage-content">
                        <h3 style="margin-bottom: 20px;">
                            Manage Products
                        </h3>
                        <div id="admin-products-list">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="container">
            <p>
                © 2025 Herbal Store. All rights reserved. | Pakistan's Leading Herbal Online Store
            </p>
        </div>
    </footer>
    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, doc, setDoc, getDocs, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- FIREBASE SETUP ---
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCJnref7x3qqdtlFGtt-c6lZjUcmlfYK0I",
            authDomain: "herbal-pansar.firebaseapp.com",
            projectId: "herbal-pansar",
            storageBucket: "herbal-pansar.appspot.com",
            messagingSenderId: "983071124936",
            appId: "1:983071124936:web:48a7cdd989a0d94d77e4fd",
            measurementId: "G-CR0L1L84WP"
        };

        // Initialize Firebase and Services
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- INITIAL DATABASE DATA ---
        const initialProducts = [];

        // --- STATE MANAGEMENT ---
        let allProducts = [];
        let cart = [];
        let lastViewedCategory = 'home';
        let currentUser = null;
        let desktopSlideIndex = 1;
        let desktopSlideInterval;
        let mobileSlideIndex = 0;
        let lastScrollY = 0;

        // --- DOM ELEMENTS ---
        const pages = document.querySelectorAll('.page');
        const cartTotalHeaderEl = document.getElementById('cart-total-header');
        const cartItemCountBadgeEl = document.querySelector('.cart-item-count-badge');
        const cartViewContainerEl = document.getElementById('cart-view-container');
        const checkoutFormEl = document.getElementById('checkout-form-element');
        const productDetailContentEl = document.getElementById('product-detail-content');
        const searchInputEl = document.getElementById('search-input');
        const mobileSearchInputEl = document.getElementById('mobile-search-input');
        const authControlsEl = document.getElementById('auth-controls');
        const loginFormEl = document.getElementById('login-form');
        const signupFormEl = document.getElementById('signup-form');
        const ordersListEl = document.getElementById('orders-list');
        const appointmentsListEl = document.getElementById('appointments-list');
        const addProductFormEl = document.getElementById('add-product-form');
        const appointmentFormEl = document.getElementById('appointment-form');
        const modalEl = document.getElementById('custom-modal');
        const modalMessageEl = document.getElementById('modal-message');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const mainHeader = document.getElementById('main-header');
        const mobileSearchOverlay = document.getElementById('mobile-search-overlay');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const mobileMenuSidebar = document.getElementById('mobile-menu-sidebar');

        // --- MOBILE FUNCTIONALITY ---
        // Mobile header scroll behavior
        function handleScroll() {
            if (window.innerWidth <= 768) {
                const currentScrollY = window.scrollY;
                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    mainHeader.classList.add('hidden-mobile');
                } else {
                    mainHeader.classList.remove('hidden-mobile');
                }
                lastScrollY = currentScrollY;
            }
        }

        // Mobile search functions
        window.openMobileSearch = function () {
            mobileSearchOverlay.style.display = 'block';
            mobileSearchInputEl.focus();
        }

        window.closeMobileSearch = function () {
            mobileSearchOverlay.style.display = 'none';
            mobileSearchInputEl.value = '';
            document.getElementById('mobile-search-results-grid').innerHTML = '';
        }

        // Mobile menu functions
        window.openMobileMenu = function () {
            mobileMenuOverlay.style.display = 'block';
            setTimeout(() => {
                mobileMenuSidebar.classList.add('open');
            }, 10);
        }

        window.closeMobileMenu = function () {
            mobileMenuSidebar.classList.remove('open');
            setTimeout(() => {
                mobileMenuOverlay.style.display = 'none';
            }, 300);
        }

        // Handle mobile search
        function handleMobileSearch() {
            const query = mobileSearchInputEl.value.toLowerCase().trim();
            const resultsGrid = document.getElementById('mobile-search-results-grid');

            if (query.length === 0) {
                resultsGrid.innerHTML = '';
                return;
            }

            const results = allProducts.filter(p =>
                p.name.toLowerCase().includes(query) ||
                p.description.toLowerCase().includes(query)
            );

            renderProducts(results, 'mobile-search-results-grid');
        }

        // --- APPOINTMENT FUNCTIONS ---
        // Set minimum date to tomorrow
        function setMinimumAppointmentDate() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const minDate = tomorrow.toISOString().split('T')[0];
            document.getElementById('appointment-date').setAttribute('min', minDate);
        }

        // Render appointments in admin panel
        function renderAppointments(appointments) {
            if (!appointmentsListEl) return;
            
            if (appointments.length === 0) {
                appointmentsListEl.innerHTML = '<p>No appointments booked yet.</p>';
                return;
            }

            // Sort appointments by date and time
            appointments.sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}`);
                const dateB = new Date(`${b.date}T${b.time}`);
                return dateA - dateB;
            });

            appointmentsListEl.innerHTML = appointments.map(appointment => {
                const appointmentDate = new Date(`${appointment.date}T${appointment.time}`);
                const formattedDate = appointmentDate.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const formattedTime = appointmentDate.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const status = appointment.status || 'pending';

                return `
                    <div class="appointment-record">
                        <h4>Appointment with: ${appointment.name}</h4>
                        <p><strong>Date & Time:</strong> ${formattedDate} at ${formattedTime}</p>
                        <p><strong>Phone:</strong> ${appointment.phone}</p>
                        ${appointment.email ? `<p><strong>Email:</strong> ${appointment.email}</p>` : ''}
                        ${appointment.concern ? `<p><strong>Health Concern:</strong> ${appointment.concern}</p>` : ''}
                        <p><strong>Booking ID:</strong> ${appointment.id}</p>
                        <p><strong>Booked on:</strong> ${new Date(appointment.createdAt).toLocaleDateString()}</p>
                        <p><strong>Status:</strong> <span class="appointment-status ${status}">${status}</span></p>
                        <button 
                            class="btn-fulfillment ${status === 'completed' ? 'fulfilled' : ''}" 
                            data-appointment-id="${appointment.id}" 
                            data-current-status="${status}"
                            ${status === 'completed' ? 'disabled' : ''}>
                            ${status === 'pending' ? 'Mark as Confirmed' : 
                              status === 'confirmed' ? 'Mark as Completed' : 
                              'Completed'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        // --- RENDER FUNCTIONS ---
        function renderAllGrids() {
            renderProducts(allProducts, 'all-products-grid');
            renderProducts(allProducts.filter(p => p.category === 'dry-fruits'), 'dry-fruits-grid');
            renderProducts(allProducts.filter(p => p.category === 'herbal-tea'), 'herbal-tea-grid');
            renderProducts(allProducts.filter(p => p.category === 'honey'), 'honey-grid');
            renderProducts(allProducts.filter(p => p.category === 'seeds'), 'seeds-grid');
            renderProducts(allProducts.filter(p => p.category === 'supplements'), 'supplements-grid');
            renderProducts(allProducts.filter(p => p.category === 'capsules'), 'capsules-grid');
            renderProducts(allProducts.filter(p => p.category === 'cold-pressed-oil'), 'cold-pressed-oil-grid');
            renderProducts(allProducts.filter(p => p.category === 'essential-oils'), 'essential-oils-grid');
            renderProducts(allProducts.filter(p => p.category === 'deals'), 'deals-grid');
        }

        function renderProducts(productsToRender, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (productsToRender.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #888; padding: 20px 0;">No products found in this category.</p>';
                return;
            }

            container.innerHTML = productsToRender.map(p => `
                <div class="product-card">
                    <div class="product-image" onclick="showProductPage('${p.id}')"><img src="${p.image}" alt="${p.name}" onerror="this.onerror=null;this.src='https://placehold.co/300x300/ccc/ffffff?text=Image+Not+Found';"></div>
                    <div class="product-info">
                        <h3 onclick="showProductPage('${p.id}')">${p.name}</h3>
                        <div class="product-price">
                            ${p.originalPrice ? `<span class="price-original">Rs.${p.originalPrice.toFixed(2)}</span>` : ''}
                            Rs.${p.price.toFixed(2)}
                        </div>
                        <div class="quantity-controls" data-product-id="${p.id}">
                            <button class="quantity-btn">-</button>
                            <input type="number" class="quantity-input" value="1" min="1">
                            <button class="quantity-btn">+</button>
                        </div>
                        <button class="btn-primary add-to-cart-btn" data-product-id="${p.id}">ADD TO CART</button>
                    </div>
                </div>
            `).join('');
        }

        function renderProductDetailPage(product) {
            if (!product) {
                productDetailContentEl.innerHTML = '<p>Product not found.</p>';
                return;
            }
            productDetailContentEl.innerHTML = `<a href="#" onclick="showPage(lastViewedCategory)" class="back-link">&larr; Back to products</a><div class="product-detail-container"><div class="product-detail-image"><img src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x400/ccc/ffffff?text=Image+Not+Found';"></div><div class="product-detail-info"><h1>${product.name}</h1><div class="product-price">${product.originalPrice ? `<span class="price-original">Rs.${product.originalPrice.toFixed(2)}</span>` : ''}Rs.${product.price.toFixed(2)}</div><p>${product.description || 'No description available.'}</p><div class="quantity-controls" data-product-id="${product.id}"><button class="quantity-btn">-</button><input type="number" class="quantity-input" value="1" min="1"><button class="quantity-btn">+</button></div><button class="btn-primary add-to-cart-btn" data-product-id="${product.id}" style="margin-top: 20px; width: auto;">ADD TO CART</button></div></div>`;
        }

        // Render admin products list for management
        function renderAdminProductsList() {
            const adminProductsListEl = document.getElementById('admin-products-list');
            if (!adminProductsListEl) return;

            if (allProducts.length === 0) {
                adminProductsListEl.innerHTML = '<p>No products found.</p>';
                return;
            }

            adminProductsListEl.innerHTML = allProducts.map(product => `
                <div class="admin-product-item">
                    <div class="admin-product-info">
                        <h4>${product.name}</h4>
                        <p>Price: Rs.${product.price.toFixed(2)} | Category: ${product.category}</p>
                        <p>ID: ${product.id}</p>
                    </div>
                    <div class="admin-product-actions">
                        <button class="btn-delete" onclick="deleteProduct('${product.id}')">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        // --- PAGE NAVIGATION ---
        window.showPage = function (pageId) {
            pages.forEach(page => page.classList.add('hidden'));
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                if (!['cart', 'checkout', 'product-detail', 'order-success', 'login', 'admin', 'search-results', 'appointment'].includes(pageId)) {
                    lastViewedCategory = pageId;
                }
            }
            window.scrollTo(0, 0);

            if (pageId === 'checkout') renderCheckoutPage();
            if (pageId === 'admin') renderAdminPanel();
            if (pageId === 'appointment') setMinimumAppointmentDate();

            // Close mobile overlays when navigating
            closeMobileSearch();
            closeMobileMenu();
        }

        window.showProductPage = function (productId) {
            const product = allProducts.find(p => p.id === productId);
            renderProductDetailPage(product);
            showPage('product-detail');
        }

        // --- SLIDER LOGIC ---
        // Desktop Slider
        window.plusSlides = function (n) {
            showSlides(desktopSlideIndex += n);
            resetDesktopSlideInterval();
        }

        window.currentSlideDot = function (n) {
            showSlides(desktopSlideIndex = n);
            resetDesktopSlideInterval();
        }

        function showSlides(n) {
            let i;
            const sliderEl = document.getElementById('desktop-slider');
            if (!sliderEl) return;

            let slides = sliderEl.getElementsByClassName("slide");
            let dots = sliderEl.getElementsByClassName("dot");
            if (slides.length === 0) return;

            if (n > slides.length) { desktopSlideIndex = 1 }
            if (n < 1) { desktopSlideIndex = slides.length }

            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active-dot", "");
            }
            slides[desktopSlideIndex - 1].style.display = "block";
            dots[desktopSlideIndex - 1].className += " active-dot";
        }

        function resetDesktopSlideInterval() {
            clearInterval(desktopSlideInterval);
            desktopSlideInterval = setInterval(() => plusSlides(1), 5000);
        }

        // Mobile Slider (Auto-rotating)
        function rotateMobileSlides() {
            let i;
            const sliderEl = document.getElementById('mobile-slider');
            if (!sliderEl) return;
            let slides = sliderEl.getElementsByClassName("slide");
            if (slides.length === 0) return;

            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            mobileSlideIndex++;
            if (mobileSlideIndex > slides.length) { mobileSlideIndex = 1 }
            slides[mobileSlideIndex - 1].style.display = "block";
        }

        // --- CART LOGIC ---
        function addToCart(productId, quantity) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ ...product, quantity: quantity });
            }
            updateCartDisplay();
            showAlert(`${product.name} added to cart!`);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        function updateCartDisplay() {
            renderCartPage();
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotalHeaderEl.textContent = total.toFixed(2);
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartItemCountBadgeEl.textContent = totalItems;
        }

        function renderCartPage() {
            if (!cartViewContainerEl) return;
            if (cart.length === 0) {
                cartViewContainerEl.innerHTML = '<p class="cart-empty-message">Your cart is currently empty.</p>';
                return;
            }
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartViewContainerEl.innerHTML = `<div class="cart-container"><div class="cart-items">${cart.map(item => `<div class="cart-item"><div class="cart-item-details"><div class="cart-item-image"><img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/60x60/ccc/ffffff?text=N/A';"></div><div class="cart-item-info"><h4>${item.name}</h4><p class="cart-item-price">Rs.${item.price.toFixed(2)} x ${item.quantity}</p></div></div><div class="cart-item-actions"><strong>Rs.${(item.price * item.quantity).toFixed(2)}</strong><button class="remove-from-cart-btn" data-product-id="${item.id}">Remove</button></div></div>`).join('')}</div><div class="cart-summary"><h3>Order Summary</h3><p><span>Subtotal</span> <span>Rs.${total.toFixed(2)}</span></p><p><span>Shipping</span> <span>${total >= 2000 ? 'Free' : 'Rs.200'}</span></p><hr><p class="total"><span>Total</span> <span>Rs.${(total + (total < 2000 ? 200 : 0)).toFixed(2)}</span></p><button class="btn-primary" onclick="showPage('checkout')">Proceed to Checkout</button></div></div>`;
        }

        // --- CHECKOUT LOGIC ---
        function renderCheckoutPage() {
            const guestEmailGroup = document.getElementById('guest-email-group');
            const emailInput = document.getElementById('email');

            if (!currentUser) {
                guestEmailGroup.classList.remove('hidden');
                emailInput.required = true;
            } else {
                guestEmailGroup.classList.add('hidden');
                emailInput.required = false;
            }

            const summaryContainer = document.getElementById('checkout-summary-container');
            if (!summaryContainer) return;
            if (cart.length === 0) {
                showAlert("Your cart is empty. Add items before checking out.");
                showPage('cart');
                return;
            }
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal >= 2000 ? 0 : 200;
            const total = subtotal + shipping;
            summaryContainer.innerHTML = `${cart.map(item => `<div class="summary-item"><span>${item.name} (x${item.quantity})</span><span>Rs.${(item.price * item.quantity).toFixed(2)}</span></div>`).join('')}<div class="summary-item" style="margin-top: 10px;"><span>Subtotal</span><span>Rs.${subtotal.toFixed(2)}</span></div><div class="summary-item"><span>Shipping</span><span>Rs.${shipping.toFixed(2)}</span></div><div class="summary-total"><span>Total</span><span>Rs.${total.toFixed(2)}</span></div>`;
        }

        window.showPaymentContent = function (method) {
            document.querySelectorAll('.payment-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`${method}-content`).classList.remove('hidden');
            document.querySelectorAll('.payment-tab').forEach(el => el.classList.remove('active'));
            document.querySelector(`.payment-tab[onclick="showPaymentContent('${method}')"]`).classList.add('active');
        }

        // --- PRODUCT MANAGEMENT ---
        window.deleteProduct = async function (productId) {
            if (!confirm('Are you sure you want to delete this product?')) {
                return;
            }

            try {
                await deleteDoc(doc(db, "products", productId));
                allProducts = allProducts.filter(p => p.id !== productId);
                renderAllGrids();
                renderAdminProductsList();
                showAlert("Product deleted successfully!");
            } catch (error) {
                console.error("Error deleting product: ", error);
                showAlert("Failed to delete product. Please try again.");
            }
        }

        // --- AUTHENTICATION & ADMIN (LOCAL STORAGE) ---
        window.toggleAuthForms = function () {
            loginFormEl.classList.toggle('hidden');
            signupFormEl.classList.toggle('hidden');
            loginFormEl.reset();
            signupFormEl.reset();
        }

        function updateAuthControls() {
            if (currentUser) {
                let welcomeMessage = `Welcome, ${currentUser.name}`;
                if (currentUser.role === 'admin') {
                    welcomeMessage += ` | <a href="#" onclick="showPage('admin')">Admin Panel</a>`;
                }
                welcomeMessage += ` | <a href="#" onclick="logout()">Logout</a>`;
                authControlsEl.innerHTML = welcomeMessage;
            } else {
                authControlsEl.innerHTML = `<a href="#" onclick="showPage('login')">Login</a>`;
            }
        }

        window.logout = function () {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthControls();
            showPage('home');
            showAlert("You have been logged out.");
        }

        function renderAdminPanel() {
            if (!currentUser || currentUser.role !== 'admin') {
                showAlert("You do not have permission to view this page.");
                showPage('home');
                return;
            }
            // Firestore listener for orders
            const ordersQuery = query(collection(db, "orders"));
            onSnapshot(ordersQuery, (querySnapshot) => {
                const orders = [];
                querySnapshot.forEach((doc) => {
                    orders.push({ id: doc.id, ...doc.data() });
                });
                renderOrders(orders);
            });

            // Firestore listener for appointments
            const appointmentsQuery = query(collection(db, "appointments"));
            onSnapshot(appointmentsQuery, (querySnapshot) => {
                const appointments = [];
                querySnapshot.forEach((doc) => {
                    appointments.push({ id: doc.id, ...doc.data() });
                });
                renderAppointments(appointments);
            });

            // Render products list for management
            renderAdminProductsList();
        }

        window.showAdminContent = function (contentType) {
            document.querySelectorAll('.admin-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`admin-${contentType}-content`).classList.remove('hidden');
            document.querySelectorAll('.admin-tab').forEach(el => el.classList.remove('active'));
            document.querySelector(`.admin-tab[onclick="showAdminContent('${contentType}')"]`).classList.add('active');

            if (contentType === 'manage') {
                renderAdminProductsList();
            }
        }

        function renderOrders(orders) {
            if (orders.length === 0) {
                ordersListEl.innerHTML = '<p>No orders received yet.</p>';
                return;
            }
            // Sort orders by date, newest first
            orders.sort((a, b) => new Date(b.date) - new Date(a.date));

            ordersListEl.innerHTML = orders.map(order => {
                const isFulfilled = order.status === 'fulfilled';
                let orderItemsHtml = '';
                if (order.items && Array.isArray(order.items)) {
                    orderItemsHtml = order.items.map(item => `<li>${item.name} (x${item.quantity})</li>`).join('');
                }

                return `
                    <div class="order-record">
                        <h4>Order from: ${order.customer.name}</h4>
                        <p><strong>Order ID:</strong> ${order.id}</p>
                        <p><strong>Date:</strong> ${new Date(order.date).toLocaleString()}</p>
                        <p><strong>Contact:</strong> ${order.customer.email} | ${order.customer.phone}</p>
                        <p><strong>Address:</strong> ${order.customer.address}</p>
                        <p><strong>Payment Method:</strong> ${order.paymentMethod}</p>
                        <p><strong>Total:</strong> Rs. ${order.total.toFixed(2)}</p>
                        <details>
                            <summary>View Items (${order.items.length})</summary>
                            <ul>${orderItemsHtml}</ul>
                        </details>
                        <button 
                            class="btn-fulfillment ${isFulfilled ? 'fulfilled' : ''}" 
                            data-order-id="${order.id}" 
                            ${isFulfilled ? 'disabled' : ''}>
                            ${isFulfilled ? 'Fulfilled' : 'Mark as Fulfilled'}
                        </button>
                    </div>
                `
            }).join('');
        }

        // --- MODAL & SEARCH ---
        function showAlert(message) {
            modalMessageEl.textContent = message;
            modalEl.classList.remove('hidden');
        }

        function handleSearch() {
            const query = searchInputEl.value.toLowerCase().trim();
            if (query.length === 0) {
                showPage(lastViewedCategory || 'home');
                return;
            };
            const results = allProducts.filter(p => p.name.toLowerCase().includes(query) || p.description.toLowerCase().includes(query));
            renderProducts(results, 'search-results-grid');
            showPage('search-results');
            document.getElementById('search-results-title').textContent = `Results for "${query}"`;
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('click', async function (e) {
            if (e.target.classList.contains('add-to-cart-btn')) {
                const productId = e.target.dataset.productId;
                const controls = e.target.closest('.product-info, .product-detail-info');
                const quantity = parseInt(controls.querySelector('.quantity-input').value);
                addToCart(productId, quantity);
            }
            if (e.target.classList.contains('quantity-btn')) {
                const input = e.target.parentNode.querySelector('.quantity-input');
                let value = parseInt(input.value);
                if (e.target.textContent === '+') value++;
                else if (value > 1) value--;
                input.value = value;
            }
            if (e.target.classList.contains('remove-from-cart-btn')) {
                const productId = e.target.dataset.productId;
                removeFromCart(productId);
            }
            // Order fulfillment button listener
            if (e.target.classList.contains('btn-fulfillment') && !e.target.disabled && e.target.dataset.orderId) {
                const orderId = e.target.dataset.orderId;
                const orderRef = doc(db, "orders", orderId);
                try {
                    await updateDoc(orderRef, {
                        status: "fulfilled"
                    });
                    showAlert(`Order ${orderId} marked as fulfilled.`);
                } catch (error) {
                    console.error("Error updating order status: ", error);
                    showAlert("Failed to update order status.");
                }
            }
            // Appointment status button listener
            if (e.target.classList.contains('btn-fulfillment') && !e.target.disabled && e.target.dataset.appointmentId) {
                const appointmentId = e.target.dataset.appointmentId;
                const currentStatus = e.target.dataset.currentStatus;
                let newStatus;
                
                if (currentStatus === 'pending') {
                    newStatus = 'confirmed';
                } else if (currentStatus === 'confirmed') {
                    newStatus = 'completed';
                } else {
                    return; // Already completed
                }

                const appointmentRef = doc(db, "appointments", appointmentId);
                try {
                    await updateDoc(appointmentRef, {
                        status: newStatus
                    });
                    showAlert(`Appointment ${appointmentId} marked as ${newStatus}.`);
                } catch (error) {
                    console.error("Error updating appointment status: ", error);
                    showAlert("Failed to update appointment status.");
                }
            }
        });

        // Close mobile overlays when clicking outside
        mobileSearchOverlay.addEventListener('click', (e) => {
            if (e.target === mobileSearchOverlay) {
                closeMobileSearch();
            }
        });

        mobileMenuOverlay.addEventListener('click', (e) => {
            if (e.target === mobileMenuOverlay) {
                closeMobileMenu();
            }
        });

        modalCloseBtn.addEventListener('click', () => modalEl.classList.add('hidden'));
        modalEl.addEventListener('click', (e) => { if (e.target === modalEl) modalEl.classList.add('hidden'); });

        searchInputEl.addEventListener('keyup', handleSearch);
        mobileSearchInputEl.addEventListener('keyup', handleMobileSearch);

        // Add scroll listener for mobile header
        window.addEventListener('scroll', handleScroll);

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                mainHeader.classList.remove('hidden-mobile');
                closeMobileSearch();
                closeMobileMenu();
            }
        });

        loginFormEl.addEventListener('submit', function (e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (email === 'admin@gmail.com' && password === 'admin123') {
                currentUser = { name: 'Admin', email: 'admin@gmail.com', role: 'admin' };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthControls();
                showPage('admin');
                loginFormEl.reset();
                return;
            }

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthControls();
                showPage('home');
                loginFormEl.reset();
            } else {
                showAlert("Invalid email or password.");
            }
        });

        signupFormEl.addEventListener('submit', function (e) {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            let users = JSON.parse(localStorage.getItem('users')) || [];
            if (users.some(u => u.email === email)) {
                showAlert("An account with this email already exists.");
                return;
            }
            const newUser = { name, email, password, role: 'customer' };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            showAlert("Signup successful! Please login.");
            toggleAuthForms();
        });

        // Appointment form submission
        appointmentFormEl.addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = {
                name: document.getElementById('appointment-name').value,
                phone: document.getElementById('appointment-phone').value,
                email: document.getElementById('appointment-email').value,
                date: document.getElementById('appointment-date').value,
                time: document.getElementById('appointment-time').value,
                concern: document.getElementById('appointment-concern').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            // Validate date is not in the past
            const appointmentDateTime = new Date(`${formData.date}T${formData.time}`);
            const now = new Date();
            if (appointmentDateTime <= now) {
                showAlert("Please select a future date and time for your appointment.");
                return;
            }

            try {
                const docRef = await addDoc(collection(db, "appointments"), formData);
                showAlert(`Appointment booked successfully! Your booking reference is: ${docRef.id.substring(0, 8).toUpperCase()}`);
                appointmentFormEl.reset();
                setMinimumAppointmentDate(); // Reset minimum date
                showPage('home');
            } catch (error) {
                console.error("Error booking appointment: ", error);
                showAlert("Failed to book appointment. Please try again.");
            }
        });

        checkoutFormEl.addEventListener('submit', async function (e) {
            e.preventDefault();

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal >= 2000 ? 0 : 200;
            const total = subtotal + shipping;

            const newOrder = {
                date: new Date().toISOString(),
                customer: {
                    name: document.getElementById('fullName').value,
                    email: currentUser ? currentUser.email : document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                },
                items: cart,
                paymentMethod: document.querySelector('.payment-tab.active').textContent,
                total: total,
                status: 'pending'
            };

            try {
                const docRef = await addDoc(collection(db, "orders"), newOrder);
                console.log("Order written with ID: ", docRef.id);
                showPage('order-success');
                cart = [];
                updateCartDisplay();
                checkoutFormEl.reset();
            } catch (error) {
                console.error("Error adding order to Firestore: ", error);
                showAlert('There was a problem placing your order. Please try again.');
            }
        });

        addProductFormEl.addEventListener('submit', async function (e) {
            e.preventDefault();
            const submitButton = addProductFormEl.querySelector('button[type="submit"]');

            const name = document.getElementById('product-name').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const category = document.getElementById('product-category').value;
            const description = document.getElementById('product-description').value;
            const imageFilename = document.getElementById('product-image-filename').value;

            if (!imageFilename) {
                showAlert("Please enter the image filename.");
                return;
            }

            submitButton.disabled = true;
            submitButton.textContent = 'Adding...';

            try {
                const imageUrl = `images/${imageFilename}`;
                const newProduct = {
                    id: String(Date.now()),
                    name,
                    price,
                    category,
                    description,
                    image: imageUrl,
                };

                await setDoc(doc(db, "products", newProduct.id), newProduct);

                showAlert("Product added successfully!");
                allProducts.push(newProduct);
                renderAllGrids();
                renderAdminProductsList();
                addProductFormEl.reset();
            } catch (error) {
                console.error("Error adding product: ", error);
                showAlert(`Failed to add product. Error: ${error.message}`);
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'Add Product';
            }
        });

        // --- INITIALIZATION ---
        async function initializeStore() {
            // Load user from local storage
            try {
                const loggedInUser = JSON.parse(localStorage.getItem('currentUser'));
                if (loggedInUser) {
                    currentUser = loggedInUser;
                }
            } catch (error) {
                console.error("Could not parse user from local storage:", error);
                localStorage.removeItem('currentUser');
            }
            updateAuthControls();

            // Fetch products from Firestore
            try {
                const productsCollection = collection(db, "products");
                const productSnapshot = await getDocs(productsCollection);

                if (productSnapshot.empty && initialProducts.length > 0) {
                    console.log("No products found in Firestore. Populating with initial data...");
                    const batch = [];
                    initialProducts.forEach(p => {
                        const docRef = doc(db, "products", p.id);
                        batch.push(setDoc(docRef, p));
                    });
                    await Promise.all(batch);
                    allProducts = initialProducts;
                } else {
                    allProducts = productSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                }
                renderAllGrids();
            } catch (error) {
                console.error("Error fetching products from Firestore: ", error);
                showAlert("Could not load products. Please check your connection and Firebase setup.");
            }

            // Initial UI setup
            updateCartDisplay();
            // Start Desktop Slider
            showSlides(desktopSlideIndex);
            resetDesktopSlideInterval();
            // Start Mobile Slider
            rotateMobileSlides();
            setInterval(rotateMobileSlides, 5000);
        }

        // Run the store on window load
        window.onload = initializeStore;
    </script>
</body>

</html>

        